# Telegram_Bot
Robô para gerir faturas

# Sobre o Bot

Este Bot é uma ferramenta criada para auxiliar os clientes da Ipage Software: 

https://www.ipage.com.br

Você pode procurar no Telegram por @IpageSoftwareBot.

Assista o vídeo no Youtube

https://www.youtube.com/watch?v=wiihNRlDoWU

![Figura 01](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_01.png)

# NOSSOS CANAIS

IpageTelegram.
Versão: 2.0.3 Beta
Última atualização:  01 Apr 2021 03:14:02

* Site da Ipage (https://www.ipage.com.br/)
* Twitter (https://twitter.com/ipage_software)
* Suporte Técnico (https://www.ipage.com.br/helpdesk/)
* suporte@ipage.com.br
* Telegram do autor @diogenesdias (https://t.me/diogenesdias)

# ACESSANDO O BOT DA IPAGE.

Digite na caixa de pesquisa do Telegram por: Ipage Software

![Figura 02](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_02.png)

# INICIANDO O BOT.

Digite o comando: /start para iniciar o bot.

![Figura 03](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_03.png)

# CONHECENDO AS OPÇÕES DO MENU INICIAL.

Ao iniciar o bot com o comando /start uma mensagem de saudação será exibida e logo abaixo algumas opções preliminares do menu.

![Figura 04](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_04.png)

# MENSAGEM INICIAL.

* Na mensagem inicial você verá seu nome cadastrado no Telegram.
* A versão do bot.
* A data da última atualização realizada no bot.

São elas:

MENU INICIAL

No menu inicial temos as seguintes opções:

* Menu Administração
* Menu Minhas faturas
* Serviços Contratados
* Manual de Operações

# MENU ADMINISTRAÇÃO

Este menu é composto por 04 (quatro) submenus, são eles:
 
* Enviar Lembretes
* Manutenção
* Usuários
* Faturas

Ver figura abaixo:

![Figura 05](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_05.png)

Nota: esta opção só será visualizada pelo usuário administrador.

# MENU ADMINISTRAÇÃO → ENVIAR LEMBRETES

Ao clicar neste menu, um lembrete é disparado via e-mail para todos os clientes que estão com faturas a vencer ou vencidas.

O bot também comunica o fato a outro bot mensageiro chamado Ipage Bot. 

![Figura 06](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_06.png)

Modelo de uma mensagem a ser recebida após o envio do lembrete:

![Figura 07](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_07.png)

![Figura 08](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_08.png)

Nota: esta opção só será visualizada pelo usuário administrador.

# MENU ADMINISTRAÇÃO → MANUTENÇÃO

Ao selecionar esta opção do menu, o bot entra automaticamente no modo manutenção ficando totalmente inoperante.

Este recurso foi criado para que ajustes possam ser realizados ou alguma atualização possa ser implantada.

O usuário que tentar utilizar o bot no momento em que a manutenção estiver ativa, receberá uma mensagem informando o motivo da sua inoperância temporária.

![Figura 09](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_09.png)

Nota: esta opção só será visualizada pelo usuário administrador.

# MENU ADMINISTRAÇÃO → USUÁRIOS

Ao selecionar esta opção você poderá visualizar a listagem de usuários que utilizam o bot. Poderá ativar ou desativar um usuário para ter acesso aos recursos do bot.
Você poderá monitorar as ações que um determinado usuário faz no bot gerando um log no robô mensageiro. 

![Figura 10](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_10.png)

Nota: esta opção só será visualizada pelo usuário administrador.

# MENU ADMINISTRAÇÃO → USUÁRIOS – LISTAGEM USUÁRIO.

Ao selecionar esta opção será exibida uma listagem dos usuários que utilizam o bot.

![Figura 11](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_11.png)

Nota: esta opção só será visualizada pelo usuário administrador.

MENU ADMINISTRAÇÃO → USUÁRIOS – ATIVAR/DESATIVAR.

Ao selecionar esta opção do menu, o usuário administrador poderá selecionar qual o usuário poderá ou não ter acesso ao bot.

![Figura 12](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_12.png)


Na imagem acima o usuário Danny encontra-se desativado.
Ao desativar um usuário, o bot exibirá uma mensagem informando ao mesmo a sua situação.

![Figura 13](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_13.png)

Nota: esta opção só será visualizada pelo usuário administrador.

# MENU ADMINISTRAÇÃO → USUÁRIOS – LOG DO USUÁRIO.

Nesta opção do menu o usuário administrador pode ativar ou não o log do usuário.
Se o logo do usuário estiver ativo, o usuário será monitorado e um log de atividades será enviado o nosso robô mensageiro.

![Figura 14](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_14.png)

# MENU ADMINISTRAÇÃO → USUÁRIOS – LOG DO USUÁRIO.

![Figura 15](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_15.png)


# MENU ADMINISTRAÇÃO → USUÁRIOS – LOG DO USUÁRIO.

![Figura 16](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_16.png)

Nota: esta opção só será visualizada pelo usuário administrador.

# MENU ADMINISTRAÇÃO → FATURAS.

Nesta opção do menu temos as faturas que foram geradas pelo nosso robô de cobranças que é gerido pela nossa plataforma de retaguarda.

![Figura 17](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_17.png)

Aqui podemos gerir as faturas a receber, faturas quitadas, baixar uma fatura que ainda encontra-se pendente, cancelar uma fatura emitida, reenviar uma fatura ao cliente, dentre outras operações.


# MENU ADMINISTRAÇÃO → FATURAS – À RECEBER.

Nesta opção de menu pode-se gerir todas as faturas que ainda estão pendentes.

Você poderá selecionar a fatura por mês e ano, selecionado no menu abaixo:

![Figura 18](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_18.png)

Ao selecionar o mês e ano clique no botão Consultar mês/ano (mês selecionado/ano selecionado). 

Ver figura abaixo:

![Figura 19](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_19.png)

Resultado:

![Figura 20](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_20.png)

Ao selecionar a opção do menu “Consultar ano(ano corrente)”, serão exibidas todas as faturas pendentes do ano corrente.

![Figura 21](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_21.png)

# MENU ADMINISTRAÇÃO → FATURAS – À RECEBER.

![Figura 22](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_22.png)

Nota: esta opção só será visualizada pelo usuário administrador.

# MENU ADMINISTRAÇÃO → FATURAS → QUITADAS.

Nesta opção do menu o funcionamento é o mesmo das faturas a receber, o que muda é a situação da fatura. Apenas as faturas pagas serão geridas. 

Favor consultar MENU ADMINISTRAÇÃO → FATURAS → A RECEBER para maiores informações.

![Figura 23](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_23.png)

# MENU ADMINISTRAÇÃO → FATURAS – EMITIR.

Nesta opção de menu pode-se mudar a situação da fatura para emitida. No nosso robô de cobrança, a fatura possui 04 (quatro) estágios de situação financeira, são elas:

* Emitida
* Enviada
* Paga
* Cancelada

Vamos esclarecer as regras de negócio:

Uma fatura é considerada emitida quando ela é gerada pelo nosso robô de cobranças mas ainda não foi comunicada a sua emissão ao cliente.

Uma fatura é considerada enviada quando ela foi gerada pelo nosso robô de cobranças e comunicada ao cliente a sua existência.

Uma fatura é considerada paga quando ela foi gerada pelo nosso robô de cobranças e comunicada ao cliente a sua existência e o cliente paga esta fatura.

Uma fatura é considerada cancelada pelo nosso robô de cobranças quando ela foi emitida e ainda não foi comunicada ao cliente a sua existência.

A fatura só poderá ter a situação modificada se foi enviada ao cliente e o mesmo discorda de algum critério, tais como: data de vencimento, cobrança de multas e encargos e/o valor da fatura.

Assim sendo, a fatura é ajustada e volta a situação de emitida.


Para modificar a situação da fatura para emitida, é necessário selecionar o cliente e só depois as faturas geradas para aquele cliente serão exibidas para a seleção e mudança da sua situação.

![Figura 24](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_24.png)

# MENU ADMINISTRAÇÃO → FATURAS – EMITIR.

![Figura 25](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_25.png)

Nota: esta opção só será visualizada pelo usuário administrador.

# MENU ADMINISTRAÇÃO → FATURAS → ENVIAR.

Nesta opção do menu o funcionamento é o mesmo das faturas emitir, a diferença é que a situação será de fatura enviada. 

Favor consultar MENU ADMINISTRAÇÃO → FATURAS → EMITIR para maiores informações.

![Figura 26](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_26.png)

Nota: esta opção só será visualizada pelo usuário administrador.

# MENU MINHAS FATURAS.

Nesta opção de menu o usuário poderá consultar as faturas pendentes, pagas e canceladas.

![Figura 27](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_27.png)

# MENU MINHAS FATURAS → PENDENTES.

Ao selecionar a opção do menu Pendentes, serão exibidas informações a respeitos de todas as faturas que constam em aberto e que devem ser pagas pelo usuário.

![Figura 28](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_28.png)

Como podemos perceber, são exibidas as informações referentes ao número da fatura, a sua data de vencimento e o total da fatura.

Ainda nesta opção o usuário poderá comunicar o seu pagamento, realizando a baixa automaticamente em nosso sistema financeiro.

# MENU MINHAS FATURAS → PENDENTES → COMUNICAR PAGAMENTO FATURA.

![Figura 29](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_29.png)

Ao selecionar esta opção, você deverá selecionar o cliente para que as faturas pendentes sejam exibidas para seleção e confirmação do pagamento.

![Figura 30](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_30.png)

# MENU MINHAS FATURAS → PENDENTES → COMUNICAR PAGAMENTO FATURA → MEIOS DE PAGAMENTO.

Você também poderá consultar as formas de pagamento selecionando a opção do menu “Meios de Pagamento”.

![Figura 31](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_31.png)

![Figura 32](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_32.png)

# MENU MINHAS FATURAS → PAGAS

Nesta opção do menu o funcionamento é o mesmo das faturas pendentes. Favor consultar MENU MINHAS FATURAS → PENDENTES para maiores informações.

![Figura 33](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_33.png)

# MENU MINHAS FATURAS → CANCELADAS

Nesta opção do menu o funcionamento é o mesmo das faturas pendentes. Favor consultar MENU MINHAS FATURAS → PENDENTES para maiores informações.

![Figura 34](https://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/figura_34.png)

# MENU SERVIÇOS CONTRATADOS

Ao selecionar esta opção do menu, serão exibidos todos os serviços cadastrados para o usuário do Telegram.

Estes serviços são cadastrados em nossa plataforma de retaguarda, ver figura acima.
As informações apresentadas são:

* O serviço contratado
* A descrição do serviço
* Um link opcional que te encaminhará para um manual ou aplicação de exemplo.


Temos duas opções:

* Recorrer ao suporte conversando diretamente com o autor que desenvolveu este bot @diogenesdias.
* Retornar ao menu inicial

# MENU MANUAL DE OPERAÇÃO

Ao selecionar esta opção do menu, você poderá visualizar/baixar o manual de operação deste bot em formato PDF.

Você também poderá acessar diretamente através do link:

http://www.ipagesoftware.com.br/telegram/IpageTelegram/assets/manual/IpageSoftwareBot.pdf


# CONSIDERAÇÕES FINAIS

Se você chegou até aqui é porque este assunto despertou o seu interesse.

Este projeto foi desenvolvido em PHP 07 (sete) puro sangue, sem o auxílio de frameworks.

Ele foi baseado na documentação da API do Telegram: https://core.telegram.org/bots/api.

# BASTIDORES

Este bot é capaz de trabalhar com base de dados MySql, paginar dados, utilizar em suas solicitações GET com múltiplos parãmetros, acessar API de terceiros, comunicar-se com outros bot, dentre outras peripécias que vão além da programação tradicional.
